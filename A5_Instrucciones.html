<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Manual de Pr√°ctica - Limpieza de Datos | Universidad del SABES</title>
<style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .section h2 {
            font-size: 2rem;
            color: #4a5568;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .platform-logo {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            font-weight: bold;
        }
        
        .powerbi-logo { background: linear-gradient(135deg, #f7b731, #5f27cd); }
        .python-logo { background: linear-gradient(135deg, #3776ab, #ffd43b); }
        .r-logo { background: linear-gradient(135deg, #165caa, #276dc3); }
        
        .step {
            background: rgba(103, 126, 234, 0.1);
            border-left: 5px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        
        .step:hover {
            background: rgba(103, 126, 234, 0.15);
            transform: translateX(5px);
        }
        
        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .step-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #4a5568;
            flex: 1;
            margin-left: 15px;
        }
        
        .checkpoint {
            background: rgba(46, 213, 115, 0.2);
            border: 2px solid #2ed573;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            user-select: none;
        }
        
        .checkpoint:hover {
            background: rgba(46, 213, 115, 0.3);
            transform: scale(1.02);
        }
        
        .checkpoint.completed {
            background: rgba(46, 213, 115, 0.4);
            border-color: #20bf6b;
        }
        
        .checkpoint input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin-right: 5px;
        }
        
        .checkpoint label {
            cursor: pointer;
            flex: 1;
            font-weight: 500;
        }
        
        .code-container {
            margin: 15px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .code-header {
            background: #4a5568;
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }
        
        .code-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .code-actions {
            display: flex;
            gap: 8px;
        }
        
        .code-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.3s ease;
        }
        
        .code-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            margin: 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            position: relative;
            white-space: pre-wrap;
            line-height: 1.4;
        }
        
        .code-comment {
            color: #68d391;
            font-style: italic;
        }
        
        .code-keyword {
            color: #63b3ed;
            font-weight: bold;
        }
        
        .code-string {
            color: #fbb6ce;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .comparison-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .speed-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .speed-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            flex: 1;
            overflow: hidden;
        }
        
        .speed-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .speed-fast { background: linear-gradient(90deg, #2ed573, #7bed9f); }
        .speed-medium { background: linear-gradient(90deg, #ffa726, #ffcc02); }
        .speed-slow { background: linear-gradient(90deg, #ff6b6b, #ee5a52); }
        
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .pros, .cons {
            padding: 15px;
            border-radius: 10px;
        }
        
        .pros {
            background: rgba(46, 213, 115, 0.1);
            border: 1px solid #2ed573;
        }
        
        .cons {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid #ff6b6b;
        }
        
        .dataset-selector {
            background: rgba(116, 75, 162, 0.1);
            border: 2px solid #764ba2;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .dataset-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dataset-option:hover {
            border-color: #764ba2;
            background: rgba(116, 75, 162, 0.05);
        }
        
        .dataset-option.selected {
            border-color: #764ba2;
            background: rgba(116, 75, 162, 0.1);
        }
        
        .progress-tracker {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 300px;
            z-index: 1000;
        }
        
        .progress-bar-container {
            background: #e2e8f0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .alert {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-warning {
            background: rgba(255, 107, 107, 0.1);
            border-color: #ff6b6b;
        }
        
        .alert-success {
            background: rgba(46, 213, 115, 0.1);
            border-color: #2ed573;
        }
        
        .alert-info {
            background: rgba(52, 152, 219, 0.1);
            border-color: #3498db;
        }
        
        .time-estimate {
            background: rgba(142, 68, 173, 0.1);
            border: 2px solid #8e44ad;
            border-radius: 10px;
            padding: 10px 15px;
            margin: 10px 0;
            display: inline-block;
            font-weight: bold;
            color: #8e44ad;
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header h1 { font-size: 2rem; }
            .section h2 { font-size: 1.5rem; }
            .comparison-grid { grid-template-columns: 1fr; }
            .pros-cons { grid-template-columns: 1fr; }
            .progress-tracker { 
                position: relative; 
                top: auto; 
                right: auto; 
                margin: 20px 0; 
                max-width: 100%;
            }
        }
    </style>
</head>

</html><main><body>
<nav role="navigation"></nav><article role="article"></article><div class="container">
<div class="header">
<h1>üßπ MANUAL DE PR√ÅCTICA - LIMPIEZA DE DATOS</h1>
<p><strong>Universidad del SABES</strong> | Anal√≠tica de Datos | Sesi√≥n 5</p>
<p>Profesor: Fausto No√© Jim√©nez | 10 de junio 2025</p>
<div class="time-estimate">‚è±Ô∏è Tiempo estimado: 90 minutos</div>
</div>
<div class="progress-tracker">
<h3>üìä Progreso General</h3>
<div class="progress-bar-container">
<div class="progress-bar-fill" id="overallProgress"></div>
</div>
<p id="progressText">0% completado</p>
<div style="margin-top: 15px;">
<h4>üéØ Plataformas:</h4>
<div style="font-size: 0.9rem;">
<div id="powerbiProgress">üìä Power BI: 0%</div>
<div id="pythonProgress">üêç Python: 0%</div>
<div id="rProgress">üìà R: 0%</div>
</div>
</div>
</div>
<!-- Secci√≥n de Selecci√≥n de Dataset -->
<div class="section">
<h2>üìÅ PASO 1: SELECCI√ìN DE DATASET</h2>
<div class="alert alert-info">
<span style="font-size: 1.5rem;">üí°</span>
<div>
<strong>Importante:</strong> Para esta pr√°ctica, utilizaremos datasets espec√≠ficos seg√∫n tu carrera. 
                    Si a√∫n no recibes tu dataset asignado, puedes practicar con los datasets de muestra disponibles.
                </div>
</div>
<div class="dataset-selector">
<h3>üéØ Selecciona tu √°rea de estudio:</h3>
<div class="dataset-option" onclick="selectDataset('hr-attrition')" style="border: 3px solid #667eea; background: rgba(102, 126, 234, 0.1);">
<strong>üéØ DATASET PRINCIPAL - HR Employee Attrition (IBM)</strong>
<p>Dataset completo: Rotaci√≥n de empleados con 1,470 filas √ó 35 columnas</p>
<small>üìÅ Descarga: <a href="https://www.kaggle.com/datasets/pavansubhasht/ibm-hr-analytics-attrition-dataset" target="_blank">WA_FnUseC_HREmployeeAttrition.csv</a></small>
<div style="margin-top: 10px; font-size: 0.85rem; background: rgba(255,255,255,0.8); padding: 8px; border-radius: 5px;">
<strong>üìä Caracter√≠sticas del dataset:</strong><br/>
‚Ä¢ 1,470 empleados ficticios de IBM<br/>
‚Ä¢ 35 variables (edad, salario, satisfacci√≥n, rotaci√≥n)<br/>
‚Ä¢ Contiene todos los problemas t√≠picos de calidad<br/>
‚Ä¢ Perfecto para demostrar cada t√©cnica del manual
</div>
</div>
<div class="dataset-option" onclick="selectDataset('admin')">
<strong>üíº Administraci√≥n y Desarrollo de Negocios</strong>
<p>Dataset alternativo: Customer Sales Data (ventas y demograf√≠a)</p>
<small>üìÅ Descarga: <a href="https://bit.ly/sabes-admin-data" target="_blank">bit.ly/sabes-admin-data</a></small>
</div>
<div class="dataset-option" onclick="selectDataset('ti')">
<strong>üíª Ingenier√≠a en Tecnolog√≠as de Informaci√≥n</strong>
<p>Dataset alternativo: Network Traffic Analysis (logs de red)</p>
<small>üìÅ Descarga: <a href="https://bit.ly/sabes-ti-data" target="_blank">bit.ly/sabes-ti-data</a></small>
</div>
<div class="dataset-option" onclick="selectDataset('industrial')">
<strong>üè≠ Ingenier√≠a Industrial</strong>
<p>Dataset alternativo: Manufacturing Quality Control (control de calidad)</p>
<small>üìÅ Descarga: <a href="https://bit.ly/sabes-industrial-data" target="_blank">bit.ly/sabes-industrial-data</a></small>
</div>
<div class="dataset-option" onclick="selectDataset('marketing')">
<strong>üì¢ Mercadotecnia</strong>
<p>Dataset alternativo: Digital Marketing Campaigns (campa√±as digitales)</p>
<small>üìÅ Descarga: <a href="https://bit.ly/sabes-marketing-data" target="_blank">bit.ly/sabes-marketing-data</a></small>
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="25" id="dataset-downloaded" type="checkbox"/>
<label for="dataset-downloaded">‚úÖ He descargado mi dataset y est√° listo para trabajar</label>
</div>
</div>
<!-- Comparaci√≥n de Plataformas -->
<div class="section">
<h2>‚öñÔ∏è COMPARACI√ìN DE PLATAFORMAS</h2>
<div class="alert alert-warning">
<span style="font-size: 1.5rem;">‚ö°</span>
<div>
<strong>Filosof√≠a de trabajo:</strong> Cada plataforma tiene su enfoque √∫nico. 
                    Power BI es visual e intuitivo, Python es program√°tico y flexible, R es estad√≠stico y potente.
                </div>
</div>
<div class="comparison-grid">
<div class="comparison-card">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<div class="platform-logo powerbi-logo">PBI</div>
<h3>Power BI</h3>
</div>
<div class="speed-indicator">
<strong>Velocidad de implementaci√≥n:</strong>
<div class="speed-bar">
<div class="speed-fill speed-fast" style="width: 90%;"></div>
</div>
<span>90%</span>
</div>
<div class="pros-cons">
<div class="pros">
<h4>‚úÖ Ventajas</h4>
<ul>
<li>Interfaz visual intuitiva</li>
<li>Detecci√≥n autom√°tica de tipos</li>
<li>Sin c√≥digo requerido</li>
<li>Integraci√≥n con Microsoft</li>
</ul>
</div>
<div class="cons">
<h4>‚ùå Limitaciones</h4>
<ul>
<li>Menos control granular</li>
<li>Dependiente de GUI</li>
<li>Costo de licencia</li>
<li>Menos automatizaci√≥n</li>
</ul>
</div>
</div>
</div>
<div class="comparison-card">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<div class="platform-logo python-logo">üêç</div>
<h3>Python (Colab)</h3>
</div>
<div class="speed-indicator">
<strong>Velocidad de implementaci√≥n:</strong>
<div class="speed-bar">
<div class="speed-fill speed-medium" style="width: 70%;"></div>
</div>
<span>70%</span>
</div>
<div class="pros-cons">
<div class="pros">
<h4>‚úÖ Ventajas</h4>
<ul>
<li>M√°xima flexibilidad</li>
<li>Ecosistema robusto</li>
<li>Gratuito y open source</li>
<li>Muy escalable</li>
</ul>
</div>
<div class="cons">
<h4>‚ùå Limitaciones</h4>
<ul>
<li>Curva de aprendizaje</li>
<li>Requiere programaci√≥n</li>
<li>Setup m√°s complejo</li>
<li>Debugging necesario</li>
</ul>
</div>
</div>
</div>
<div class="comparison-card">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<div class="platform-logo r-logo">R</div>
<h3>R (Posit Cloud)</h3>
</div>
<div class="speed-indicator">
<strong>Velocidad de implementaci√≥n:</strong>
<div class="speed-bar">
<div class="speed-fill speed-medium" style="width: 65%;"></div>
</div>
<span>65%</span>
</div>
<div class="pros-cons">
<div class="pros">
<h4>‚úÖ Ventajas</h4>
<ul>
<li>Estad√≠sticas avanzadas</li>
<li>Visualizaci√≥n superior</li>
<li>Tidyverse elegante</li>
<li>Comunidad acad√©mica</li>
</ul>
</div>
<div class="cons">
<h4>‚ùå Limitaciones</h4>
<ul>
<li>Sintaxis espec√≠fica</li>
<li>Memoria limitada</li>
<li>Menos vers√°til</li>
<li>Curva de aprendizaje</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<!-- POWER BI SECTION COMPLETA -->
<div class="section">
<h2>
<div class="platform-logo powerbi-logo">PBI</div>
                LIMPIEZA EN POWER BI
            </h2>
<div class="alert alert-info">
<span style="font-size: 1.5rem;">üéØ</span>
<div>
<strong>Filosof√≠a de Power BI:</strong> "Point, click, transform". Power BI prioriza la 
                    facilidad de uso y la intuici√≥n visual sobre el control program√°tico.
                </div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">1</div>
<div class="step-title">Cargar el Dataset</div>
<div class="time-estimate">‚è±Ô∏è 3 min</div>
</div>
<ol>
<li><strong>Abrir Power BI Desktop</strong> (descargar desde powerbi.microsoft.com si no lo tienes)</li>
<li>Hacer clic en <strong>"Get Data (Obtener datos)"</strong> en la cinta de opciones</li>
<li>Seleccionar <strong>"Text/CSV"</strong> para archivos CSV o <strong>"Excel"</strong> para archivos Excel</li>
<li>Navegar y seleccionar tu archivo descargado</li>
<li>En la ventana de vista previa, hacer clic en <strong>"Transform Data (Transformar datos)"</strong></li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
‚Ä¢ Archivo: <code>WA_FnUseC_HREmployeeAttrition.csv</code><br/>
‚Ä¢ Resultado: 1,470 filas √ó 35 columnas detectadas<br/>
‚Ä¢ Tipos autom√°ticos: Age=Whole Number, Attrition=Text, MonthlyIncome=Whole Number<br/>
‚Ä¢ Encoding: UTF-8 detectado autom√°ticamente
</div>
</div>
<div class="alert alert-warning">
<span style="font-size: 1.2rem;">‚ö†Ô∏è</span>
<strong>¬°NO hagas clic en "Load" directamente!</strong> Siempre ve a "Transform Data (Transformar datos)" para limpiar primero.
                </div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="pbi-completed" type="checkbox"/>
<label for="pbi-completed">‚úÖ Dataset cargado en Power Query Editor</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">2</div>
<div class="step-title">Exploraci√≥n Inicial en Power Query</div>
<div class="time-estimate">‚è±Ô∏è 5 min</div>
</div>
<div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
<h4>üîç Interface de Power Query Editor:</h4>
<ul>
<li><strong>Panel izquierdo:</strong> Lista de consultas (Queries)</li>
<li><strong>Centro:</strong> Vista previa de datos</li>
<li><strong>Panel derecho:</strong> Pasos aplicados (Applied Steps)</li>
<li><strong>Cinta superior:</strong> Herramientas de transformaci√≥n</li>
</ul>
</div>
<ol>
<li><strong>Examinar las columnas:</strong> Observa los tipos de datos en la parte superior de cada columna</li>
<li><strong>Ver estad√≠sticas:</strong> Clic en "View" ‚Üí "Column Quality" para ver % de errores/vac√≠os</li>
<li><strong>Activar perfil:</strong> Clic en "View" ‚Üí "Column Profile" para estad√≠sticas detalladas</li>
<li><strong>Verificar distribuci√≥n:</strong> Clic en "View" ‚Üí "Column Distribution" para ver frecuencias</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
<strong>Problemas detectados:</strong><br/>
‚Ä¢ <code>EmployeeCount</code>: 100% mismo valor (1) - columna constante<br/>
‚Ä¢ <code>Over18</code>: 100% mismo valor ("Y") - sin variabilidad<br/>
‚Ä¢ <code>StandardHours</code>: 100% mismo valor (80) - redundante<br/>
‚Ä¢ <code>Education</code>: N√∫meros 1-5 en lugar de texto descriptivo<br/>
‚Ä¢ <code>EnvironmentSatisfaction</code>: N√∫meros 1-4 sin etiquetas<br/>
<strong>Calidad general:</strong> 100% Valid, 0% Error, 0% Empty
</div>
</div>
<div class="alert alert-success">
<span style="font-size: 1.2rem;">üí°</span>
<strong>Ventaja de Power BI:</strong> Los indicadores visuales te muestran inmediatamente 
                    la calidad de cada columna sin escribir c√≥digo.
                </div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="pbi-exploration" type="checkbox"/>
<label for="pbi-exploration">‚úÖ He explorado mi dataset y activado todas las vistas de calidad</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">3</div>
<div class="step-title">Limpieza B√°sica</div>
<div class="time-estimate">‚è±Ô∏è 10 min</div>
</div>
<h4>A) Eliminar duplicados:</h4>
<ol>
<li>Seleccionar todas las columnas (Ctrl+A)</li>
<li>Ir a "Home" ‚Üí "Remove Rows" ‚Üí "Remove Duplicates (Quitar duplicados)"</li>
<li>Observar cu√°ntas filas se eliminaron en el mensaje</li>
</ol>
<h4>B) Limpiar nombres de columnas:</h4>
<ol>
<li>Seleccionar todas las columnas</li>
<li>Clic derecho ‚Üí "Rename" o usar "Transform" ‚Üí "Format" ‚Üí "Trim" para espacios</li>
<li>Reemplazar espacios por guiones bajos si es necesario</li>
</ol>
<h4>C) Corregir tipos de datos:</h4>
<ol>
<li>Hacer clic en el √≠cono de tipo de dato en cada columna</li>
<li>Seleccionar el tipo correcto (Text, Whole Number, Decimal, Date, etc.)</li>
<li>Si hay errores, Power BI te lo indicar√° visualmente</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
<strong>A) Duplicados:</strong> 0 filas eliminadas (dataset ya limpio)<br/>
<strong>B) Renombrar:</strong> <code>DistanceFromHome</code> ‚Üí <code>Distance_From_Home</code><br/>
<strong>C) Tipos corregidos:</strong><br/>
‚Ä¢ <code>Age</code>: Whole Number ‚úì<br/>
‚Ä¢ <code>Attrition</code>: Text ‚úì<br/>
‚Ä¢ <code>Education</code>: Whole Number (se transformar√° despu√©s)<br/>
‚Ä¢ <code>MonthlyIncome</code>: Whole Number ‚úì<br/>
<strong>Resultado:</strong> 35 columnas con tipos validados
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="pbi-basic-cleaning" type="checkbox"/>
<label for="pbi-basic-cleaning">‚úÖ Duplicados eliminados, columnas renombradas, tipos corregidos</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">4</div>
<div class="step-title">Manejar Valores Faltantes</div>
<div class="time-estimate">‚è±Ô∏è 8 min</div>
</div>
<div style="background: rgba(255, 193, 7, 0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
<h4>üéØ Estrategias en Power BI:</h4>
<ul>
<li><strong>Remove Rows:</strong> Para eliminar filas con valores nulos</li>
<li><strong>Fill Down/Up:</strong> Para propagar valores</li>
<li><strong>Replace Values:</strong> Para reemplazar nulos con valores espec√≠ficos</li>
</ul>
</div>
<h4>Para columnas num√©ricas:</h4>
<ol>
<li>Seleccionar la columna num√©rica</li>
<li>Ir a "Transform" ‚Üí "Replace Values"</li>
<li>En "Value to Find" dejar en blanco</li>
<li>En "Replace With" poner un valor como 0 o la media estimada</li>
</ol>
<h4>Para columnas de texto:</h4>
<ol>
<li>Seleccionar la columna de texto</li>
<li>Ir a "Transform" ‚Üí "Replace Values"</li>
<li>Reemplazar valores en blanco con "Unknown" o "No Data"</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
<strong>¬°Excelente noticia!</strong> Este dataset no tiene valores faltantes.<br/>
‚Ä¢ Column Quality muestra: 100% Valid en todas las columnas<br/>
‚Ä¢ 0% Empty, 0% Error<br/>
‚Ä¢ Total c√©lulas: 51,450 (1,470 √ó 35)<br/>
‚Ä¢ Todas completas: 51,450<br/>
<strong>Acci√≥n:</strong> Saltar este paso - dataset completo
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="pbi-missing-values" type="checkbox"/>
<label for="pbi-missing-values">‚úÖ Valores faltantes tratados en columnas num√©ricas y de texto</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">5</div>
<div class="step-title">Detecci√≥n de Outliers en Power BI</div>
<div class="time-estimate">‚è±Ô∏è 6 min</div>
</div>
<div style="background: rgba(255, 193, 7, 0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
<h4>üéØ Detecci√≥n de Outliers en Power BI:</h4>
<ul>
<li><strong>M√©todo Visual:</strong> Usar gr√°ficos de boxplot para identificar outliers</li>
<li><strong>Filtros avanzados:</strong> Crear filtros basados en percentiles</li>
<li><strong>Columnas calculadas:</strong> Usar DAX para marcar outliers</li>
</ul>
</div>
<h4>A) Crear columna calculada para detectar outliers:</h4>
<ol>
<li>En Power Query, ir a "Add Column" ‚Üí "Custom Column"</li>
<li>Nombrar la columna: "Es_Outlier"</li>
<li>Usar f√≥rmula para detectar outliers basada en percentiles</li>
<li>Marcar valores que est√©n fuera del rango Q1-1.5*IQR a Q3+1.5*IQR</li>
</ol>
<h4>B) Aplicar transformaciones a outliers:</h4>
<ol>
<li>Filtrar filas donde "Es_Outlier" = true</li>
<li>Decidir estrategia: eliminar, winsorizar o mantener</li>
<li>Aplicar "Replace Values" para corregir outliers extremos</li>
<li>Documentar decisiones en los "Applied Steps"</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
<strong>Columna objetivo:</strong> <code>MonthlyIncome</code><br/>
<strong>F√≥rmula Custom Column:</strong><br/>
<code>if [MonthlyIncome] &gt; 15000 or [MonthlyIncome] &lt; 1000 then "Outlier" else "Normal"</code><br/>
<strong>Outliers encontrados:</strong><br/>
‚Ä¢ 23 empleados con salario &gt; $15,000/mes<br/>
‚Ä¢ 0 empleados con salario &lt; $1,000/mes<br/>
‚Ä¢ Rango normal: $1,009 - $12,344<br/>
<strong>Decisi√≥n:</strong> Mantener outliers (pueden ser ejecutivos)
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="pbi-outliers" type="checkbox"/>
<label for="pbi-outliers">‚úÖ Outliers detectados y tratados usando columnas calculadas</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">6</div>
<div class="step-title">Transformaciones de Datos</div>
<div class="time-estimate">‚è±Ô∏è 5 min</div>
</div>
<h4>A) Estandarizar formatos de texto:</h4>
<ol>
<li>Seleccionar columnas de texto</li>
<li>Ir a "Transform" ‚Üí "Format" ‚Üí "UPPERCASE/lowercase/Proper Case"</li>
<li>Aplicar "Trim" para eliminar espacios extra</li>
<li>Usar "Clean" para caracteres no imprimibles</li>
</ol>
<h4>B) Crear columnas derivadas:</h4>
<ol>
<li>Ir a "Add Column" ‚Üí "Custom Column"</li>
<li>Crear categor√≠as basadas en rangos num√©ricos</li>
<li>Generar flags booleanos para condiciones especiales</li>
<li>Calcular m√©tricas derivadas (ej: IMC, ratios, etc.)</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
<strong>Transformaciones principales:</strong><br/>
‚Ä¢ <strong>Education:</strong> Transform ‚Üí Replace Values<br/>
¬†¬†1 ‚Üí "Below College", 2 ‚Üí "College", 3 ‚Üí "Bachelor"<br/>
¬†¬†4 ‚Üí "Master", 5 ‚Üí "Doctor"<br/>
‚Ä¢ <strong>EnvironmentSatisfaction:</strong><br/>
¬†¬†1 ‚Üí "Low", 2 ‚Üí "Medium", 3 ‚Üí "High", 4 ‚Üí "Very High"<br/>
‚Ä¢ <strong>Eliminar constantes:</strong> EmployeeCount, Over18, StandardHours<br/>
<strong>Resultado:</strong> 32 columnas √∫tiles, variables legibles
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="pbi-transformations" type="checkbox"/>
<label for="pbi-transformations">‚úÖ Transformaciones de formato y columnas derivadas aplicadas</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">7</div>
<div class="step-title">Validaci√≥n y Carga Final</div>
<div class="time-estimate">‚è±Ô∏è 4 min</div>
</div>
<ol>
<li><strong>Revisar pasos aplicados:</strong> En el panel "Applied Steps" verifica cada transformaci√≥n</li>
<li><strong>Verificar calidad:</strong> Aseg√∫rate de que "Column Quality" muestre 100% Valid</li>
<li><strong>Renombrar consulta:</strong> Clic derecho en "Query1" ‚Üí Rename ‚Üí "DatosLimpios"</li>
<li><strong>Cargar datos:</strong> Clic en "Home" ‚Üí "Close &amp; Apply"</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Resultado final con HR Employee Attrition:</strong><br/>
‚Ä¢ <strong>Dimensiones:</strong> 1,470 filas √ó 32 columnas<br/>
‚Ä¢ <strong>Columnas eliminadas:</strong> 3 (EmployeeCount, Over18, StandardHours)<br/>
‚Ä¢ <strong>Variables transformadas:</strong> 7 (Education, EnvironmentSatisfaction, etc.)<br/>
‚Ä¢ <strong>Calidad:</strong> 100% Valid, 0% errores<br/>
‚Ä¢ <strong>Tama√±o final:</strong> ~180KB<br/>
‚Ä¢ <strong>Tiempo total:</strong> ~30 minutos
</div>
</div>
<div class="alert alert-success">
<span style="font-size: 1.2rem;">üéâ</span>
<strong>¬°Excelente!</strong> Tu dataset est√° limpio y listo para an√°lisis en Power BI.
                    Observa c√≥mo cada paso queda documentado autom√°ticamente.
                </div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="pbi-final" type="checkbox"/>
<label for="pbi-final">‚úÖ Validaci√≥n completada y datos cargados exitosamente</label>
</div>
</div>
</div>
<!-- PYTHON SECTION COMPLETA -->
<div class="section">
<h2>
<div class="platform-logo python-logo">üêç</div>
                LIMPIEZA EN PYTHON (GOOGLE COLAB)
            </h2>
<div class="alert alert-info">
<span style="font-size: 1.5rem;">üöÄ</span>
<div>
<strong>Filosof√≠a de Python:</strong> "Explicit is better than implicit". Python te da control 
                    total sobre cada decisi√≥n de limpieza, pero requiere m√°s c√≥digo.
                </div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">1</div>
<div class="step-title">Configurar Google Colab</div>
<div class="time-estimate">‚è±Ô∏è 2 min</div>
</div>
<ol>
<li>Ir a <strong>colab.research.google.com</strong></li>
<li>Crear un nuevo notebook: "Nuevo cuaderno"</li>
<li>Renombrar: "Limpieza_Datos_[TuNombre]"</li>
<li>Configurar runtime: Runtime ‚Üí Change runtime type ‚Üí Python 3</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
‚Ä¢ <strong>Nombre del notebook:</strong> <code>HR_Attrition_Limpieza_[TuNombre]</code><br/>
‚Ä¢ <strong>Runtime:</strong> Python 3 con GPU opcional<br/>
‚Ä¢ <strong>Librer√≠as preinstaladas:</strong> pandas, numpy, matplotlib, seaborn<br/>
‚Ä¢ <strong>Preparaci√≥n:</strong> Lista para cargar CSV de 200KB<br/>
‚Ä¢ <strong>Tiempo estimado:</strong> 2 minutos de configuraci√≥n
</div>
</div>
<div class="alert alert-warning">
<span style="font-size: 1.2rem;">‚ö°</span>
<strong>Ventaja de Colab:</strong> No necesitas instalar nada. Todo est√° en la nube y ya 
                    tiene las librer√≠as principales instaladas.
                </div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="colab-setup" type="checkbox"/>
<label for="colab-setup">‚úÖ Google Colab configurado y notebook creado</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">2</div>
<div class="step-title">Cargar Dataset y Librer√≠as</div>
<div class="time-estimate">‚è±Ô∏è 5 min</div>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üêç</span>
<span>Celda 1: Importar librer√≠as esenciales</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># ===================================================================
# BLOQUE 1: CONFIGURACI√ìN INICIAL Y LIBRER√çAS
# ===================================================================</span>
<span class="code-comment"># Importar librer√≠as esenciales para limpieza</span>
<span class="code-keyword">import</span> pandas <span class="code-keyword">as</span> pd
<span class="code-keyword">import</span> numpy <span class="code-keyword">as</span> np
<span class="code-keyword">import</span> matplotlib.pyplot <span class="code-keyword">as</span> plt
<span class="code-keyword">import</span> seaborn <span class="code-keyword">as</span> sns
<span class="code-keyword">from</span> datetime <span class="code-keyword">import</span> datetime
<span class="code-keyword">import</span> warnings

<span class="code-comment"># Configuraci√≥n para mejor visualizaci√≥n</span>
warnings.filterwarnings(<span class="code-string">'ignore'</span>)
plt.style.use(<span class="code-string">'seaborn-v0_8'</span>)
sns.set_palette(<span class="code-string">"husl"</span>)

<span class="code-comment"># Configurar pandas para mejor visualizaci√≥n</span>
pd.set_option(<span class="code-string">'display.max_columns'</span>, <span class="code-keyword">None</span>)
pd.set_option(<span class="code-string">'display.width'</span>, <span class="code-keyword">None</span>)
pd.set_option(<span class="code-string">'display.max_colwidth'</span>, <span class="code-keyword">50</span>)

<span class="code-comment"># Verificar instalaci√≥n exitosa</span>
<span class="code-keyword">print</span>(<span class="code-string">"‚úÖ Librer√≠as importadas exitosamente"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üìä Pandas versi√≥n: {pd.__version__}"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üî¢ NumPy versi√≥n: {np.__version__}"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üìà Matplotlib versi√≥n: {plt.matplotlib.__version__}"</span>)</div>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üìÅ</span>
<span>Celda 2: Cargar dataset</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># ===================================================================
# BLOQUE 2: CARGA DE DATOS
# ===================================================================</span>
<span class="code-comment"># Opci√≥n 1: Subir archivo desde tu computadora</span>
<span class="code-keyword">from</span> google.colab <span class="code-keyword">import</span> files

<span class="code-keyword">print</span>(<span class="code-string">"üìÇ Selecciona tu archivo CSV desde tu computadora:"</span>)
uploaded = files.upload()

<span class="code-comment"># Obtener el nombre del archivo subido</span>
filename = list(uploaded.keys())[<span class="code-keyword">0</span>]
<span class="code-keyword">print</span>(<span class="code-string">f"üìÑ Archivo detectado: {filename}"</span>)

<span class="code-comment"># Cargar el dataset con manejo de errores</span>
<span class="code-keyword">try</span>:
    df = pd.read_csv(filename, encoding=<span class="code-string">'utf-8'</span>)
<span class="code-keyword">except</span> UnicodeDecodeError:
    <span class="code-keyword">print</span>(<span class="code-string">"‚ö†Ô∏è Problema de encoding, intentando con latin-1..."</span>)
    df = pd.read_csv(filename, encoding=<span class="code-string">'latin-1'</span>)

<span class="code-comment"># Informaci√≥n b√°sica de carga</span>
<span class="code-keyword">print</span>(<span class="code-string">f"‚úÖ Dataset cargado exitosamente"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üìè Dimensiones: {df.shape[0]:,} filas √ó {df.shape[1]} columnas"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üíæ Memoria usada: {df.memory_usage(deep=True).sum() / 1024**2:.2f} MB"</span>)

<span class="code-comment"># Opci√≥n 2: Cargar desde URL (comentado)
# df = pd.read_csv('https://tu-url-del-dataset.csv')</span></div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="python-data-loaded" type="checkbox"/>
<label for="python-data-loaded">‚úÖ Librer√≠as importadas y dataset cargado correctamente</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">3</div>
<div class="step-title">Exploraci√≥n Exhaustiva</div>
<div class="time-estimate">‚è±Ô∏è 8 min</div>
</div>
<div style="background: rgba(55, 118, 171, 0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
<h4>üéØ Ventaja de Python:</h4>
<p>Python te permite crear un an√°lisis exploratorio completo con m√©tricas personalizadas 
                    que Power BI no puede generar autom√°ticamente.</p>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üîç</span>
<span>Celda 3: An√°lisis exploratorio completo</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># ===================================================================
# BLOQUE 3: AN√ÅLISIS EXPLORATORIO DE DATOS (EDA)
# ===================================================================</span>
<span class="code-comment"># Informaci√≥n general del dataset</span>
<span class="code-keyword">print</span>(<span class="code-string">"="*50</span>)
<span class="code-keyword">print</span>(<span class="code-string">"üìä REPORTE DE CALIDAD DE DATOS"</span>)
<span class="code-keyword">print</span>(<span class="code-string">"="*50</span>)

<span class="code-comment"># 1. INFORMACI√ìN B√ÅSICA</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüî¢ INFORMACI√ìN B√ÅSICA:"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"Filas: {df.shape[0]:,}"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"Columnas: {df.shape[1]}"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"Memoria total: {df.memory_usage(deep=True).sum() / 1024**2:.2f} MB"</span>)

<span class="code-comment"># 2. TIPOS DE DATOS</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüìã TIPOS DE DATOS:"</span>)
<span class="code-keyword">print</span>(df.dtypes.value_counts())

<span class="code-comment"># 3. AN√ÅLISIS DE VALORES FALTANTES</span>
<span class="code-keyword">print</span>(<span class="code-string">"\n‚ùì VALORES FALTANTES:"</span>)
missing_data = df.isnull().sum()
missing_percent = <span class="code-keyword">100</span> * missing_data / len(df)
missing_table = pd.DataFrame({
    <span class="code-string">'Columna'</span>: missing_data.index,
    <span class="code-string">'Faltantes'</span>: missing_data.values,
    <span class="code-string">'Porcentaje'</span>: missing_percent.values
}).sort_values(<span class="code-string">'Porcentaje'</span>, ascending=<span class="code-keyword">False</span>)

<span class="code-comment"># Mostrar solo columnas con valores faltantes</span>
missing_table_filtered = missing_table[missing_table[<span class="code-string">'Faltantes'</span>] &gt; <span class="code-keyword">0</span>]
<span class="code-keyword">if</span> len(missing_table_filtered) &gt; <span class="code-keyword">0</span>:
    <span class="code-keyword">print</span>(missing_table_filtered.to_string(index=<span class="code-keyword">False</span>))
<span class="code-keyword">else</span>:
    <span class="code-keyword">print</span>(<span class="code-string">"‚úÖ No hay valores faltantes en el dataset"</span>)

<span class="code-comment"># 4. DUPLICADOS</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüîÑ DUPLICADOS:"</span>)
duplicates = df.duplicated().sum()
<span class="code-keyword">print</span>(<span class="code-string">f"Filas duplicadas: {duplicates:,} ({100*duplicates/len(df):.2f}%)"</span>)

<span class="code-comment"># 5. ESTAD√çSTICAS DESCRIPTIVAS</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüìä ESTAD√çSTICAS DESCRIPTIVAS:"</span>)
<span class="code-keyword">print</span>(<span class="code-string">"\nColumnas num√©ricas:"</span>)
<span class="code-keyword">print</span>(df.describe())

<span class="code-keyword">print</span>(<span class="code-string">"\nColumnas categ√≥ricas:"</span>)
<span class="code-keyword">print</span>(df.describe(include=[<span class="code-string">'object'</span>]))</div>
</div>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Salida esperada con HR Employee Attrition:</strong><br/>
<code>üìä INFORMACI√ìN B√ÅSICA:</code><br/>
<code>Filas: 1,470</code><br/>
<code>Columnas: 35</code><br/>
<code>Memoria total: 0.52 MB</code><br/><br/>
<code>üìã TIPOS DE DATOS:</code><br/>
<code>int64    26</code><br/>
<code>object    9</code><br/><br/>
<code>‚ùì VALORES FALTANTES:</code><br/>
<code>‚úÖ No hay valores faltantes en el dataset</code><br/><br/>
<code>üîÑ DUPLICADOS: 0 filas</code>
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="python-exploration" type="checkbox"/>
<label for="python-exploration">‚úÖ Exploraci√≥n completa realizada con estad√≠sticas y visualizaciones</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">4</div>
<div class="step-title">Limpieza Sistem√°tica</div>
<div class="time-estimate">‚è±Ô∏è 12 min</div>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üßπ</span>
<span>Celda 4: Proceso completo de limpieza</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># ===================================================================
# BLOQUE 4: LIMPIEZA COMPLETA DE DATOS
# ===================================================================</span>
<span class="code-comment"># Crear una copia para mantener los datos originales</span>
df_original = df.copy()
df_clean = df.copy()

<span class="code-keyword">print</span>(<span class="code-string">"üìã INICIANDO PROCESO DE LIMPIEZA..."</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üìä Dataset original: {df_clean.shape}"</span>)

<span class="code-comment"># 1. ELIMINAR DUPLICADOS</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüîÑ ELIMINANDO DUPLICADOS:"</span>)
initial_rows = len(df_clean)
df_clean = df_clean.drop_duplicates()
duplicates_removed = initial_rows - len(df_clean)
<span class="code-keyword">print</span>(<span class="code-string">f"   ‚Ä¢ Duplicados eliminados: {duplicates_removed:,}"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"   ‚Ä¢ Filas restantes: {len(df_clean):,}"</span>)

<span class="code-comment"># 2. LIMPIAR NOMBRES DE COLUMNAS</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüìù ESTANDARIZANDO NOMBRES DE COLUMNAS:"</span>)
<span class="code-keyword">print</span>(<span class="code-string">"   Nombres originales:"</span>, list(df_clean.columns[:5]), <span class="code-string">"..."</span>)

df_clean.columns = (df_clean.columns
                   .str.strip()           <span class="code-comment"># Quitar espacios al inicio/final</span>
                   .str.lower()           <span class="code-comment"># Convertir a min√∫sculas</span>
                   .str.replace(<span class="code-string">' '</span>, <span class="code-string">'_'</span>)     <span class="code-comment"># Espacios por guiones bajos</span>
                   .str.replace(<span class="code-string">'[^a-zA-Z0-9_]'</span>, <span class="code-string">''</span>, regex=<span class="code-keyword">True</span>)) <span class="code-comment"># Solo alfanum√©ricos</span>
<span class="code-keyword">print</span>(<span class="code-string">"   Nombres estandarizados:"</span>, list(df_clean.columns[:5]), <span class="code-string">"..."</span>)

<span class="code-comment"># 3. MANEJO DE VALORES FALTANTES</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüîß MANEJO DE VALORES FALTANTES:"</span>)
numeric_cols = df_clean.select_dtypes(include=[np.number]).columns
categorical_cols = df_clean.select_dtypes(include=[<span class="code-string">'object'</span>]).columns

<span class="code-keyword">for</span> col <span class="code-keyword">in</span> numeric_cols:
    missing_count = df_clean[col].isnull().sum()
    <span class="code-keyword">if</span> missing_count &gt; <span class="code-keyword">0</span>:
        median_value = df_clean[col].median()
        df_clean[col] = df_clean[col].fillna(median_value)
        <span class="code-keyword">print</span>(<span class="code-string">f"   ‚Ä¢ {col}: {missing_count:,} valores ‚Üí mediana ({median_value:.2f})"</span>)

<span class="code-keyword">for</span> col <span class="code-keyword">in</span> categorical_cols:
    missing_count = df_clean[col].isnull().sum()
    <span class="code-keyword">if</span> missing_count &gt; <span class="code-keyword">0</span>:
        mode_values = df_clean[col].mode()
        fill_value = mode_values[<span class="code-keyword">0</span>] <span class="code-keyword">if</span> len(mode_values) &gt; <span class="code-keyword">0</span> <span class="code-keyword">else</span> <span class="code-string">'Unknown'</span>
        df_clean[col] = df_clean[col].fillna(fill_value)
        <span class="code-keyword">print</span>(<span class="code-string">f"   ‚Ä¢ {col}: {missing_count:,} valores ‚Üí '{fill_value}'"</span>)

<span class="code-comment"># 4. DETECTAR Y TRATAR OUTLIERS</span>
<span class="code-keyword">print</span>(<span class="code-string">"\nüéØ TRATAMIENTO DE OUTLIERS:"</span>)
<span class="code-keyword">for</span> col <span class="code-keyword">in</span> numeric_cols:
    Q1 = df_clean[col].quantile(<span class="code-keyword">0.25</span>)
    Q3 = df_clean[col].quantile(<span class="code-keyword">0.75</span>)
    IQR = Q3 - Q1
    lower_bound = Q1 - <span class="code-keyword">1.5</span> * IQR
    upper_bound = Q3 + <span class="code-keyword">1.5</span> * IQR
    
    outliers_mask = (df_clean[col] &lt; lower_bound) | (df_clean[col] &gt; upper_bound)
    outliers_count = outliers_mask.sum()
    
    <span class="code-keyword">if</span> outliers_count &gt; <span class="code-keyword">0</span>:
        outlier_percentage = (outliers_count / len(df_clean)) * <span class="code-keyword">100</span>
<span class="code-keyword">if</span> outlier_percentage &gt; <span class="code-keyword">5</span>:  <span class="code-comment"># Winsorizaci√≥n si &gt;5% outliers</span>
            df_clean[col] = np.where(df_clean[col] &lt; lower_bound, lower_bound, df_clean[col])
            df_clean[col] = np.where(df_clean[col] &gt; upper_bound, upper_bound, df_clean[col])
            <span class="code-keyword">print</span>(<span class="code-string">f"   ‚Ä¢ {col}: {outliers_count:,} outliers winsurizados ({outlier_percentage:.1f}%)"</span>)
        <span class="code-keyword">else</span>:
            <span class="code-keyword">print</span>(<span class="code-string">f"   ‚Ä¢ {col}: {outliers_count:,} outliers mantenidos ({outlier_percentage:.1f}%)"</span>)

<span class="code-keyword">print</span>(<span class="code-string">f"\n‚úÖ LIMPIEZA COMPLETADA"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"üìä Dimensiones finales: {df_clean.shape}"</span>)
<span class="code-keyword">print</span>(<span class="code-string">f"‚ùì Valores faltantes restantes: {df_clean.isnull().sum().sum()}"</span>)</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="python-completed" type="checkbox"/>
<label for="python-completed">‚úÖ Limpieza completa en Python finalizada</label>
</div>
</div>
</div>
<!-- R SECTION COMPLETA -->
<div class="section">
<h2>
<div class="platform-logo r-logo">R</div>
                LIMPIEZA EN R (POSIT CLOUD)
            </h2>
<div class="alert alert-info">
<span style="font-size: 1.5rem;">üìä</span>
<div>
<strong>Filosof√≠a de R:</strong> "Statistics first, everything else second". R est√° optimizado 
                    para an√°lisis estad√≠stico y visualizaci√≥n elegante de datos.
                </div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">1</div>
<div class="step-title">Configurar Posit Cloud</div>
<div class="time-estimate">‚è±Ô∏è 3 min</div>
</div>
<ol>
<li>Ir a <strong>posit.cloud</strong> (anteriormente RStudio Cloud)</li>
<li>Crear cuenta gratuita si no tienes una</li>
<li>Crear nuevo proyecto: "New Project" ‚Üí "New RStudio Project"</li>
<li>Nombrar el proyecto: "Limpieza_Datos_[TuNombre]"</li>
</ol>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Ejemplo con HR Employee Attrition:</strong><br/>
‚Ä¢ <strong>Proyecto:</strong> "HR_Attrition_Analysis_[TuNombre]"<br/>
‚Ä¢ <strong>Workspace:</strong> Gratuito (25 horas/mes)<br/>
‚Ä¢ <strong>Recursos:</strong> 1GB RAM, suficiente para dataset de 200KB<br/>
‚Ä¢ <strong>Preparaci√≥n:</strong> RStudio Server listo en navegador<br/>
‚Ä¢ <strong>Tiempo:</strong> 3 minutos para configuraci√≥n inicial
</div>
</div>
<div style="background: rgba(22, 92, 170, 0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
<h4>üéØ Interface de RStudio:</h4>
<ul>
<li><strong>Superior izquierda:</strong> Editor de scripts</li>
<li><strong>Superior derecha:</strong> Environment y History</li>
<li><strong>Inferior izquierda:</strong> Consola R</li>
<li><strong>Inferior derecha:</strong> Files, Plots, Packages, Help</li>
</ul>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="r-setup" type="checkbox"/>
<label for="r-setup">‚úÖ Posit Cloud configurado y proyecto R creado</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">2</div>
<div class="step-title">Instalar y Cargar Librer√≠as</div>
<div class="time-estimate">‚è±Ô∏è 4 min</div>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üì¶</span>
<span>Script R: Instalaci√≥n y carga de librer√≠as</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># Instalar librer√≠as necesarias (solo primera vez)</span>
install.packages(c(<span class="code-string">"dplyr"</span>, <span class="code-string">"tidyr"</span>, <span class="code-string">"readr"</span>, <span class="code-string">"ggplot2"</span>, 
                   <span class="code-string">"VIM"</span>, <span class="code-string">"mice"</span>, <span class="code-string">"corrplot"</span>, <span class="code-string">"lubridate"</span>, 
                   <span class="code-string">"stringr"</span>, <span class="code-string">"forcats"</span>))

<span class="code-comment"># Cargar librer√≠as esenciales</span>
library(dplyr)      <span class="code-comment"># Manipulaci√≥n de datos</span>
library(tidyr)      <span class="code-comment"># Reorganizaci√≥n de datos</span>
library(readr)      <span class="code-comment"># Lectura de datos</span>
library(ggplot2)    <span class="code-comment"># Visualizaci√≥n elegante</span>
library(VIM)        <span class="code-comment"># Visualizaci√≥n de valores faltantes</span>
library(mice)       <span class="code-comment"># Imputaci√≥n m√∫ltiple</span>
library(corrplot)   <span class="code-comment"># Matrices de correlaci√≥n</span>
library(lubridate)  <span class="code-comment"># Manejo de fechas</span>
library(stringr)    <span class="code-comment"># Manipulaci√≥n de strings</span>
library(forcats)    <span class="code-comment"># Manejo de factores</span>
<span class="code-comment"># Verificar instalaci√≥n</span>
cat(<span class="code-string">"‚úÖ Librer√≠as cargadas exitosamente\n"</span>)
cat(<span class="code-string">"üìä Tidyverse ecosystem listo\n"</span>)
cat(<span class="code-string">"üî¢ R versi√≥n:"</span>, R.version.string, <span class="code-string">"\n"</span>)</div>
</div>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Salida esperada con HR Employee Attrition:</strong><br/>
<code>‚úÖ Librer√≠as cargadas exitosamente</code><br/>
<code>üìä Tidyverse ecosystem listo</code><br/>
<code>üî¢ R versi√≥n: R version 4.3.0 (2023-04-21)</code><br/><br/>
<strong>Librer√≠as instaladas:</strong><br/>
‚Ä¢ <strong>Manipulaci√≥n:</strong> dplyr, tidyr, readr<br/>
‚Ä¢ <strong>Visualizaci√≥n:</strong> ggplot2, VIM, corrplot<br/>
‚Ä¢ <strong>Fechas y texto:</strong> lubridate, stringr, forcats<br/>
‚Ä¢ <strong>Imputaci√≥n:</strong> mice<br/>
<strong>Tiempo instalaci√≥n:</strong> ~2-3 minutos
</div>
</div>
<div class="alert alert-warning">
<span style="font-size: 1.2rem;">‚ö°</span>
<strong>Ventaja de R:</strong> El ecosistema Tidyverse hace que la manipulaci√≥n de datos 
                    sea muy legible y expresiva, casi como escribir en ingl√©s.
                </div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="r-libraries" type="checkbox"/>
<label for="r-libraries">‚úÖ Librer√≠as instaladas y cargadas correctamente</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">3</div>
<div class="step-title">Cargar y Explorar Dataset</div>
<div class="time-estimate">‚è±Ô∏è 6 min</div>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üìÅ</span>
<span>Cargar dataset con Tidyverse</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># Subir archivo (usar Files panel en RStudio)</span>
<span class="code-comment"># Opci√≥n 1: Upload button en Files panel, luego:</span>
df &lt;- read_csv(<span class="code-string">"tu_archivo.csv"</span>)

<span class="code-comment"># Informaci√≥n b√°sica del dataset</span>
cat(<span class="code-string">"üìä INFORMACI√ìN B√ÅSICA DEL DATASET\n"</span>)
cat(<span class="code-string">"==================================\n"</span>)
cat(<span class="code-string">"Dimensiones:"</span>, dim(df), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Filas:"</span>, nrow(df), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Columnas:"</span>, ncol(df), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Tama√±o en memoria:"</span>, format(object.size(df), units = <span class="code-string">"MB"</span>), <span class="code-string">"\n"</span>)

<span class="code-comment"># Estructura del dataset</span>
cat(<span class="code-string">"\nüìã ESTRUCTURA DE DATOS:\n"</span>)
str(df)

<span class="code-comment"># Primeras filas</span>
cat(<span class="code-string">"\nüëÄ PRIMERAS 6 FILAS:\n"</span>)
head(df)</div>
</div>
<div class="alert alert-info">
<span style="font-size: 1.2rem;">üìã</span>
<div>
<strong>Salida esperada con HR Employee Attrition:</strong><br/>
<code>üìä INFORMACI√ìN B√ÅSICA DEL DATASET</code><br/>
<code>Dimensiones: 1470 35</code><br/>
<code>Filas: 1470</code><br/>
<code>Columnas: 35</code><br/>
<code>Tama√±o en memoria: 0.5 Mb</code><br/><br/>
<strong>Estructura detectada:</strong><br/>
‚Ä¢ <strong>Variables num√©ricas:</strong> 26 (Age, DailyRate, Education...)<br/>
‚Ä¢ <strong>Variables de texto:</strong> 9 (Attrition, BusinessTravel...)<br/>
‚Ä¢ <strong>Rango de edad:</strong> 18-60 a√±os<br/>
‚Ä¢ <strong>Departamentos:</strong> Sales, Research &amp; Development, Human Resources
</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="r-exploration" type="checkbox"/>
<label for="r-exploration">‚úÖ Dataset cargado y exploraci√≥n inicial completada</label>
</div>
</div>
<div class="step">
<div class="step-header">
<div class="step-number">4</div>
<div class="step-title">Pipeline de Limpieza con Tidyverse</div>
<div class="time-estimate">‚è±Ô∏è 10 min</div>
</div>
<div style="background: rgba(22, 92, 170, 0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
<h4>üöÄ Filosof√≠a Tidyverse:</h4>
<p>El pipe operator (%&gt;%) permite crear "pipelines" de transformaci√≥n muy legibles. 
                    Cada funci√≥n hace una cosa y la hace bien.</p>
</div>
<div class="code-container">
<div class="code-header">
<div class="code-title">
<span>üßπ</span>
<span>Pipeline completo de limpieza</span>
</div>
<div class="code-actions">
<button class="code-btn" onclick="selectCode(this)">üìã Seleccionar</button>
<button class="code-btn" onclick="copyCode(this)">üìÑ Copiar</button>
</div>
</div>
<div class="code-block"><span class="code-comment"># Pipeline de limpieza completo usando tidyverse</span>
df_clean &lt;- df %&gt;%
  <span class="code-comment"># 1. Eliminar duplicados</span>
  distinct() %&gt;%
  
  <span class="code-comment"># 2. Limpiar nombres de columnas</span>
  rename_all(~ gsub(<span class="code-string">" "</span>, <span class="code-string">"_"</span>, tolower(trimws(.)))) %&gt;%
  
  <span class="code-comment"># 3. Convertir tipos de datos apropiados</span>
  mutate_if(is.character, as.factor) %&gt;%  <span class="code-comment"># Caracteres a factores</span>
<span class="code-comment"># 4. Manejo inteligente de outliers usando IQR</span>
  mutate_if(is.numeric, ~ ifelse(
    abs(. - median(., na.rm = <span class="code-keyword">TRUE</span>)) &gt; <span class="code-keyword">3</span> * IQR(., na.rm = <span class="code-keyword">TRUE</span>),
    median(., na.rm = <span class="code-keyword">TRUE</span>), 
    .
  )) %&gt;%
  
  <span class="code-comment"># 5. Imputaci√≥n de valores faltantes por tipo</span>
  mutate_if(is.numeric, ~ ifelse(is.na(.), median(., na.rm = <span class="code-keyword">TRUE</span>), .)) %&gt;%
  mutate_if(is.factor, ~ ifelse(is.na(.), 
                               names(sort(table(.), decreasing = <span class="code-keyword">TRUE</span>))[<span class="code-keyword">1</span>], 
                               as.character(.))) %&gt;%
  mutate_if(is.factor, as.factor)

<span class="code-comment"># Reportar cambios</span>
cat(<span class="code-string">"üßπ RESULTADOS DE LA LIMPIEZA:\n"</span>)
cat(<span class="code-string">"=============================\n"</span>)
cat(<span class="code-string">"Filas originales:"</span>, nrow(df), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Filas despu√©s de limpieza:"</span>, nrow(df_clean), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Filas eliminadas:"</span>, nrow(df) - nrow(df_clean), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Valores faltantes originales:"</span>, sum(is.na(df)), <span class="code-string">"\n"</span>)
cat(<span class="code-string">"Valores faltantes despu√©s:"</span>, sum(is.na(df_clean)), <span class="code-string">"\n"</span>)

<span class="code-comment"># Guardar dataset limpio</span>
write_csv(df_clean, <span class="code-string">"dataset_limpio_r.csv"</span>)
cat(<span class="code-string">"\nüíæ Dataset limpio guardado como 'dataset_limpio_r.csv'\n"</span>)</div>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input data-weight="3.125" id="r-completed" type="checkbox"/>
<label for="r-completed">‚úÖ Pipeline de limpieza con Tidyverse completado</label>
</div>
</div>
</div>
<!-- COMPARACI√ìN FINAL -->
<div class="section">
<h2>üèÜ COMPARACI√ìN FINAL DE PLATAFORMAS</h2>
<div class="comparison-grid">
<div class="comparison-card">
<h3>ü•á Power BI - El Velocista</h3>
<div class="speed-indicator">
<strong>Tiempo total estimado:</strong>
<div class="speed-bar">
<div class="speed-fill speed-fast" style="width: 95%;"></div>
</div>
<span>30 min</span>
</div>
<h4>üéØ Mejor para:</h4>
<ul>
<li>Usuarios de negocio</li>
<li>Limpieza r√°pida y b√°sica</li>
<li>Integraci√≥n con Microsoft</li>
<li>Presentaciones ejecutivas</li>
</ul>
</div>
<div class="comparison-card">
<h3>ü•à Python - El Todoterreno</h3>
<div class="speed-indicator">
<strong>Tiempo total estimado:</strong>
<div class="speed-bar">
<div class="speed-fill speed-medium" style="width: 70%;"></div>
</div>
<span>60 min</span>
</div>
<h4>üéØ Mejor para:</h4>
<ul>
<li>Data Scientists</li>
<li>Limpieza compleja y automatizada</li>
<li>Machine Learning posterior</li>
<li>Producci√≥n y escalabilidad</li>
</ul>
</div>
<div class="comparison-card">
<h3>ü•â R - El Estad√≠stico</h3>
<div class="speed-indicator">
<strong>Tiempo total estimado:</strong>
<div class="speed-bar">
<div class="speed-fill speed-medium" style="width: 65%;"></div>
</div>
<span>70 min</span>
</div>
<h4>üéØ Mejor para:</h4>
<ul>
<li>Investigadores y acad√©micos</li>
<li>An√°lisis estad√≠stico profundo</li>
<li>Visualizaciones publicables</li>
<li>Imputaci√≥n avanzada</li>
</ul>
</div>
</div>
<div class="alert alert-info">
<span style="font-size: 1.5rem;">üéì</span>
<div>
<strong>Recomendaci√≥n del profesor:</strong> Domina las tres plataformas. En tu carrera 
                    profesional usar√°s diferentes herramientas seg√∫n el contexto, equipo y objetivos del proyecto.
                </div>
</div>
</div>
<!-- CHECKLIST FINAL -->
<div class="section">
<h2>‚úÖ CHECKLIST FINAL DE VALIDACI√ìN</h2>
<div class="step">
<h3>üìã Antes de terminar, verifica que hayas completado:</h3>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="final-powerbi" type="checkbox"/>
<label for="final-powerbi">‚úÖ Power BI: Dataset limpio cargado y transformaciones documentadas</label>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="final-python" type="checkbox"/>
<label for="final-python">‚úÖ Python: Notebook completo con an√°lisis exploratorio y limpieza</label>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="final-r" type="checkbox"/>
<label for="final-r">‚úÖ R: Script con pipeline Tidyverse y visualizaciones ggplot2</label>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="final-files" type="checkbox"/>
<label for="final-files">‚úÖ Archivos exportados: 3 datasets limpios (uno por plataforma)</label>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="final-comparison" type="checkbox"/>
<label for="final-comparison">‚úÖ Comparaci√≥n documentada: pros/contras de cada plataforma</label>
</div>
<div class="checkpoint" onclick="toggleCheckpoint(this)">
<input id="final-reflection" type="checkbox"/>
<label for="final-reflection">‚úÖ Reflexi√≥n personal: ¬øCu√°l plataforma prefieres y por qu√©?</label>
</div>
</div>
<div class="alert alert-success" id="completion-message" style="display: none;">
<span style="font-size: 2rem;">üéâ</span>
<div>
<strong>¬°FELICITACIONES!</strong> Has completado exitosamente la pr√°ctica de limpieza de datos 
                    en las tres plataformas principales. Est√°s listo para la Actividad 5.
                </div>
</div>
</div>
<!-- PR√ìXIMOS PASOS -->
<div class="section">
<h2>üöÄ PR√ìXIMOS PASOS</h2>
<div class="alert alert-warning">
<span style="font-size: 1.5rem;">üìÖ</span>
<div>
<strong>Actividad 5 - Tratamiento de Informaci√≥n:</strong><br/>
<strong>Entrega:</strong> 23 de junio 2025<br/>
<strong>Valor:</strong> 13 puntos<br/>
<strong>Dataset:</strong> Recibir√°s tu asignaci√≥n espec√≠fica por email esta tarde
                </div>
</div>
<h3>üìù Para la Actividad 5 deber√°s entregar:</h3>
<ol>
<li><strong>Reporte de calidad:</strong> Estado inicial vs final de tu dataset</li>
<li><strong>C√≥digo documentado:</strong> Scripts de limpieza en tu plataforma preferida</li>
<li><strong>Visualizaciones:</strong> Gr√°ficos antes/despu√©s de la limpieza</li>
<li><strong>Reflexi√≥n cr√≠tica:</strong> Decisiones tomadas y justificaci√≥n</li>
</ol>
<h3>üéØ Recomendaciones finales:</h3>
<ul>
<li><strong>Experimenta:</strong> Prueba diferentes enfoques en cada plataforma</li>
<li><strong>Documenta todo:</strong> Cada decisi√≥n debe estar justificada</li>
<li><strong>Compara resultados:</strong> ¬øLos tres enfoques dan resultados similares?</li>
<li><strong>Pregunta:</strong> Usa el foro o env√≠a email si tienes dudas</li>
</ul>
<div style="text-align: center; margin-top: 30px;">
<div style="font-size: 3rem;">üéì‚ú®üöÄ</div>
<h2>¬°√âxito en tu Actividad 5!</h2>
<p><strong>Prof. Fausto No√© Jim√©nez</strong><br/>
                Universidad del SABES<br/>
                fausto.noej@sabes.edu.mx</p>
</div>
</div>
</div>
<script>
// ===================================================================
// SISTEMA DE GESTI√ìN DE ESTADO Y PROGRESO
// ===================================================================

// Estado global de la aplicaci√≥n
const AppState = {
    checkpoints: {},
    platformProgress: {
        powerbi: 0,
        python: 0,
        r: 0
    },
    selectedDataset: null
};

// Configuraci√≥n de checkpoints por plataforma
const CHECKPOINT_CONFIG = {
    powerbi: [
        'dataset-downloaded', 'pbi-completed', 'pbi-exploration', 
        'pbi-basic-cleaning', 'pbi-missing-values', 'pbi-outliers', 
        'pbi-transformations', 'pbi-final'
    ],
    python: [
        'colab-setup', 'python-data-loaded', 'python-exploration', 'python-completed'
    ],
    r: [
        'r-setup', 'r-libraries', 'r-exploration', 'r-completed'
    ],
    final: [
        'final-powerbi', 'final-python', 'final-r', 
        'final-files', 'final-comparison', 'final-reflection'
    ]
};

// ===================================================================
// FUNCIONES PRINCIPALES DE INTERACCI√ìN
// ===================================================================

// Funci√≥n para manejar selecci√≥n de dataset
function selectDataset(type) {
    // Remover selecci√≥n anterior
    document.querySelectorAll('.dataset-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    // Agregar selecci√≥n actual
    event.currentTarget.classList.add('selected');
    AppState.selectedDataset = type;
    
    // Mostrar feedback visual
    showNotification(`‚úÖ Dataset ${type} seleccionado`, 'success');
    
    console.log(`Dataset seleccionado: ${type}`);
}

// Funci√≥n principal para manejar checkpoints
function toggleCheckpoint(element) {
    // Prevenir doble activaci√≥n si se hace clic en el checkbox directamente
    if (event && event.target && event.target.type === 'checkbox') {
        return;
    }
    
    const checkbox = element.querySelector('input[type="checkbox"]');
    if (!checkbox) return;
    
    const checkboxId = checkbox.id;
    
    // Toggle estado
    checkbox.checked = !checkbox.checked;
    updateCheckpointState(element, checkbox, checkboxId);
}

// Actualizar estado visual y l√≥gico del checkpoint
function updateCheckpointState(element, checkbox, checkboxId) {
    if (checkbox.checked) {
        element.classList.add('completed');
        AppState.checkpoints[checkboxId] = true;
        
        // Animaci√≥n de √©xito
        element.style.transform = 'scale(1.05)';
        setTimeout(() => {
            element.style.transform = 'scale(1)';
        }, 200);
        
        // Sonido de √©xito (opcional)
        playSuccessSound();
        
    } else {
        element.classList.remove('completed');
        AppState.checkpoints[checkboxId] = false;
    }
    
    updateProgress();
}

// Manejar clicks directos en checkboxes
function handleDirectCheckboxChange(checkbox) {
    const element = checkbox.closest('.checkpoint');
    const checkboxId = checkbox.id;
    
    updateCheckpointState(element, checkbox, checkboxId);
}

// ===================================================================
// SISTEMA DE PROGRESO Y M√âTRICAS
// ===================================================================

// Calcular progreso de cada plataforma
function calculatePlatformProgress(checkIds) {
    if (!checkIds || checkIds.length === 0) return 0;
    
    const completed = checkIds.filter(id => AppState.checkpoints[id]).length;
    return (completed / checkIds.length) * 100;
}

// Actualizar barras de progreso y m√©tricas
function updateProgress() {
    // Actualizar progreso por plataforma
    AppState.platformProgress.powerbi = calculatePlatformProgress(CHECKPOINT_CONFIG.powerbi);
    AppState.platformProgress.python = calculatePlatformProgress(CHECKPOINT_CONFIG.python);
    AppState.platformProgress.r = calculatePlatformProgress(CHECKPOINT_CONFIG.r);
    
    // Progreso general
    const allCheckIds = Object.keys(AppState.checkpoints);
    const totalCompleted = Object.values(AppState.checkpoints).filter(Boolean).length;
    const overallProgress = allCheckIds.length > 0 ? (totalCompleted / allCheckIds.length) * 100 : 0;
    
    // Actualizar UI
    updateProgressBar('overallProgress', overallProgress);
    updateProgressText('progressText', overallProgress);
    
    // Actualizar progreso por plataforma
    updatePlatformDisplay('powerbiProgress', 'üìä Power BI', AppState.platformProgress.powerbi);
    updatePlatformDisplay('pythonProgress', 'üêç Python', AppState.platformProgress.python);
    updatePlatformDisplay('rProgress', 'üìà R', AppState.platformProgress.r);
    
    // Verificar completaci√≥n
    checkCompletion();
    
    // Guardar progreso localmente (opcional)
    saveProgress();
}

function updateProgressBar(elementId, progress) {
    const progressBar = document.getElementById(elementId);
    if (progressBar) {
        progressBar.style.width = progress + '%';
        progressBar.setAttribute('aria-valuenow', Math.round(progress));
    }
}

function updateProgressText(elementId, progress) {
    const progressText = document.getElementById(elementId);
    if (progressText) {
        progressText.textContent = Math.round(progress) + '% completado';
    }
}

function updatePlatformDisplay(elementId, label, progress) {
    const element = document.getElementById(elementId);
    if (element) {
        element.textContent = `${label}: ${Math.round(progress)}%`;
        
        // Agregar colores seg√∫n progreso
        element.style.color = progress === 100 ? '#2ed573' : 
                            progress >= 50 ? '#ffa726' : '#666';
    }
}

// Verificar si se complet√≥ todo
function checkCompletion() {
    const finalCompleted = CHECKPOINT_CONFIG.final.every(id => AppState.checkpoints[id]);
    const completionMessage = document.getElementById('completion-message');
    
    if (finalCompleted && completionMessage) {
        completionMessage.style.display = 'block';
        completionMessage.scrollIntoView({ behavior: 'smooth' });
        
        // Celebraci√≥n
        showNotification('üéâ ¬°Pr√°ctica completada exitosamente!', 'success');
        triggerConfetti();
    }
}

// ===================================================================
// FUNCIONES DE UTILIDAD PARA C√ìDIGO
// ===================================================================

function selectCode(button) {
    const codeBlock = button.closest('.code-container').querySelector('.code-block');
    
    if (window.getSelection && codeBlock) {
        const selection = window.getSelection();
        const range = document.createRange();
        range.selectNodeContents(codeBlock);
        selection.removeAllRanges();
        selection.addRange(range);
        
        // Feedback visual
        showButtonFeedback(button, '‚úÖ Seleccionado', 'üìã Seleccionar');
    }
}

function copyCode(button) {
    const codeBlock = button.closest('.code-container').querySelector('.code-block');
    if (!codeBlock) return;
    
    const codeText = codeBlock.textContent;
    
    // Usar API moderna de clipboard
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(codeText).then(() => {
            showButtonFeedback(button, '‚úÖ Copiado', 'üìÑ Copiar');
            showNotification('C√≥digo copiado al portapapeles', 'success');
        }).catch(() => {
            fallbackCopy(button, codeBlock);
        });
    } else {
        fallbackCopy(button, codeBlock);
    }
}

function showButtonFeedback(button, successText, originalText) {
    const originalBg = button.style.background;
    button.textContent = successText;
    button.style.background = 'rgba(46, 213, 115, 0.3)';
    
    setTimeout(() => {
        button.textContent = originalText;
        button.style.background = originalBg;
    }, 2000);
}

function fallbackCopy(button, codeBlock) {
    // Fallback: seleccionar texto
    selectCode(button.parentElement.querySelector('.code-btn'));
    showNotification('C√≥digo seleccionado. Usa Ctrl+C para copiar', 'info');
}

// ===================================================================
// SISTEMA DE NOTIFICACIONES Y FEEDBACK
// ===================================================================

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: ${type === 'success' ? '#2ed573' : type === 'error' ? '#ff6b6b' : '#3498db'};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        z-index: 10000;
        font-weight: bold;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        animation: slideDown 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideUp 0.3s ease';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 3000);
}

function playSuccessSound() {
    // Crear un sonido de √©xito simple usando Web Audio API
    if (typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined') {
        try {
            const audioContext = new (AudioContext || webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        } catch (e) {
            // Silenciar errores de audio
        }
    }
}

function triggerConfetti() {
    // Efecto de confetti simple usando CSS
    for (let i = 0; i < 50; i++) {
        setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.style.cssText = `
                position: fixed;
                top: -10px;
                left: ${Math.random() * 100}%;
                width: 10px;
                height: 10px;
                background: hsl(${Math.random() * 360}, 70%, 60%);
                animation: confettiFall 3s linear forwards;
                z-index: 10000;
                pointer-events: none;
            `;
            document.body.appendChild(confetti);
            
            setTimeout(() => document.body.removeChild(confetti), 3000);
        }, i * 100);
    }
}

// ===================================================================
// PERSISTENCIA Y RESTAURACI√ìN DE ESTADO
// ===================================================================

function saveProgress() {
    try {
        localStorage.setItem('sabes-limpieza-progreso', JSON.stringify(AppState));
    } catch (e) {
        // Silenciar errores de localStorage
    }
}

function loadProgress() {
    try {
        const saved = localStorage.getItem('sabes-limpieza-progreso');
        if (saved) {
            const loadedState = JSON.parse(saved);
            Object.assign(AppState, loadedState);
            
            // Restaurar estado visual de checkboxes
            Object.keys(AppState.checkpoints).forEach(checkboxId => {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox) {
                    checkbox.checked = AppState.checkpoints[checkboxId];
                    const element = checkbox.closest('.checkpoint');
                    if (element && checkbox.checked) {
                        element.classList.add('completed');
                    }
                }
            });
            
            updateProgress();
        }
    } catch (e) {
        // Silenciar errores de localStorage
    }
}

// ===================================================================
// INICIALIZACI√ìN Y EVENT LISTENERS
// ===================================================================

document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ Manual de Limpieza de Datos - Sistema inicializado');
    
    // Cargar progreso guardado
    loadProgress();
    
    // Configurar event listeners para checkboxes
    document.querySelectorAll('.checkpoint input[type="checkbox"]').forEach(checkbox => {
        const checkboxId = checkbox.id;
        
        // Inicializar estado si no existe
        if (!(checkboxId in AppState.checkpoints)) {
            AppState.checkpoints[checkboxId] = checkbox.checked;
        }
        
        // Agregar event listener
        checkbox.addEventListener('change', function() {
            handleDirectCheckboxChange(this);
        });
    });
    
    // Configurar accesibilidad para dataset options
    document.querySelectorAll('.dataset-option').forEach(option => {
        option.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            }
        });
    });
    
    // Configurar accesibilidad para checkpoints
    document.querySelectorAll('.checkpoint').forEach(checkpoint => {
        checkpoint.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleCheckpoint(this);
            }
        });
    });
    
    // Actualizar progreso inicial
    updateProgress();
    
    // Agregar estilos de animaci√≥n din√°micamente
    addAnimationStyles();
    
    console.log('‚úÖ Inicializaci√≥n completa - Sistema listo para uso');
});

function addAnimationStyles() {
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideDown {
            from { transform: translate(-50%, -100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translate(-50%, 0); opacity: 1; }
            to { transform: translate(-50%, -100%); opacity: 0; }
        }
        
        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        .checkpoint {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .checkpoint:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .progress-bar-fill {
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .code-btn {
            transition: all 0.2s ease;
        }
        
        .code-btn:active {
            transform: scale(0.95);
        }
    `;
    document.head.appendChild(style);
}

// ===================================================================
// FUNCIONES DE DEBUGGING Y UTILIDADES
// ===================================================================

// Funci√≥n para resetear todo el progreso (solo para debugging)
function resetProgress() {
    if (confirm('¬øEst√°s seguro de que quieres resetear todo el progreso?')) {
        AppState.checkpoints = {};
        AppState.platformProgress = { powerbi: 0, python: 0, r: 0 };
        AppState.selectedDataset = null;
        
        document.querySelectorAll('.checkpoint input[type="checkbox"]').forEach(checkbox => {
            checkbox.checked = false;
            const element = checkbox.closest('.checkpoint');
            if (element) {
                element.classList.remove('completed');
            }
        });
        
        document.querySelectorAll('.dataset-option').forEach(option => {
            option.classList.remove('selected');
        });
        
        updateProgress();
        localStorage.removeItem('sabes-limpieza-progreso');
        showNotification('Progreso reseteado completamente', 'info');
    }
}

// Funci√≥n para exportar progreso como JSON
function exportProgress() {
    const exportData = {
        timestamp: new Date().toISOString(),
        state: AppState,
        completion: {
            overall: Math.round((Object.values(AppState.checkpoints).filter(Boolean).length / Object.keys(AppState.checkpoints).length) * 100),
            powerbi: Math.round(AppState.platformProgress.powerbi),
            python: Math.round(AppState.platformProgress.python),
            r: Math.round(AppState.platformProgress.r)
        }
    };
    
    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'progreso-limpieza-datos.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showNotification('Progreso exportado exitosamente', 'success');
}

// Manejo de errores global
window.addEventListener('error', function(e) {
    console.error('Error detectado en el sistema:', e.error);
    showNotification('Error del sistema. Revisa la consola para detalles.', 'error');
});

// Manejo de advertencias de rendimiento
window.addEventListener('beforeunload', function(e) {
    saveProgress();
});

// Export funciones principales para debugging
window.DebugSABES = {
    state: AppState,
    functions: {
        toggleCheckpoint,
        selectDataset,
        updateProgress,
        resetProgress,
        exportProgress
    },
    config: CHECKPOINT_CONFIG
};

// ===================================================================
// FUNCIONES DE ACCESIBILIDAD AVANZADA
// ===================================================================

// Soporte para lectores de pantalla
function announceProgress() {
    const announcement = document.createElement('div');
    announcement.setAttribute('aria-live', 'polite');
    announcement.setAttribute('aria-atomic', 'true');
    announcement.className = 'sr-only';
    announcement.textContent = `Progreso actualizado. ${Math.round((Object.values(AppState.checkpoints).filter(Boolean).length / Object.keys(AppState.checkpoints).length) * 100)}% completado.`;
    
    document.body.appendChild(announcement);
    
    setTimeout(() => {
        document.body.removeChild(announcement);
    }, 1000);
}

// Navegaci√≥n por teclado mejorada
document.addEventListener('keydown', function(e) {
    // Ctrl + R para resetear (solo en modo debug)
    if (e.ctrlKey && e.key === 'r' && e.shiftKey) {
        e.preventDefault();
        resetProgress();
    }
    
    // Ctrl + E para exportar progreso
    if (e.ctrlKey && e.key === 'e' && !e.shiftKey) {
        e.preventDefault();
        exportProgress();
    }
    
    // Escape para cerrar notificaciones
    if (e.key === 'Escape') {
        document.querySelectorAll('.notification').forEach(notification => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        });
    }
});

// ===================================================================
// ANALYTICS Y M√âTRICAS (OPCIONAL)
// ===================================================================

function trackEvent(action, category, label) {
    // Placeholder para analytics
    console.log(`üìä Analytics: ${category} - ${action} - ${label}`);
    
    // Aqu√≠ se podr√≠a integrar con Google Analytics, etc.
    // gtag('event', action, { event_category: category, event_label: label });
}

// Track completaci√≥n de checkpoints
const originalUpdateCheckpointState = updateCheckpointState;
updateCheckpointState = function(element, checkbox, checkboxId) {
    const wasChecked = AppState.checkpoints[checkboxId];
    originalUpdateCheckpointState(element, checkbox, checkboxId);
    
    if (!wasChecked && checkbox.checked) {
        trackEvent('checkpoint_completed', 'progress', checkboxId);
    }
};

// Track selecci√≥n de dataset
const originalSelectDataset = selectDataset;
selectDataset = function(type) {
    originalSelectDataset(type);
    trackEvent('dataset_selected', 'interaction', type);
};

console.log('üéì Sistema de Manual de Limpieza de Datos v2.0 cargado exitosamente');
console.log('üí° Tip: Usa Ctrl+Shift+R para resetear progreso o Ctrl+E para exportar');
</script>
<!-- Estilos adicionales para sr-only -->
<style>
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}
</style>
</body></main>
